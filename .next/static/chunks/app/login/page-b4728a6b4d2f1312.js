(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9355:function(e,s,t){Promise.resolve().then(t.bind(t,6374))},6374:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var r=t(7437),a=t(2265),n=t(9376),l=t(7648),o=t(9064);function i(){let[e,s]=(0,a.useState)({username:"",password:""}),[t,i]=(0,a.useState)(!1),u=(0,n.useRouter)(),d=t=>{s({...e,[t.target.name]:t.target.value})},c=async s=>{s.preventDefault(),i(!0);try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();t.success?(localStorage.setItem("auth-token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),console.log("登录成功，用户数据:",t.data.user),o.Am.success("登录成功，正在跳转..."),setTimeout(()=>{u.push("/")},1e3)):o.Am.error(t.message)}catch(e){o.Am.error("登录失败，请重试")}finally{i(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"班费管理系统"}),(0,r.jsx)("p",{className:"text-gray-600",children:"请登录您的账户"})]}),(0,r.jsxs)("form",{onSubmit:c,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"用户名"}),(0,r.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"请输入用户名",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"密码"}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"请输入密码",required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"登录中...":"登录"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["还没有账户？"," ",(0,r.jsx)(l.default,{href:"/register",className:"text-blue-600 hover:text-blue-700",children:"立即注册"})]})})]})})}}},function(e){e.O(0,[64,448,971,117,744],function(){return e(e.s=9355)}),_N_E=e.O()}]);